<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
{% include "head-seo-tags.twig" %}
{{ function('wp_head') }}


<script>
    // Flag to track if AdSense has been initialized
    var lazyAdsenseInitialized = false;

    // Function to dynamically load a script
    function loadScript(src, isAsync = true, callback = null) {
        var script = document.createElement("script");
        script.src = src;
        script.async = isAsync;
        if (callback) script.onload = callback;
        document.body.appendChild(script);
    }

    // Function to initialize AdSense ads
    function initializeAdSense() {
        if (typeof adsbygoogle !== "undefined") {
            // Look for all AdSense units and initialize them
            document.querySelectorAll(".adsbygoogle").forEach(function (ad) {
                (adsbygoogle = window.adsbygoogle || []).push({});
            });
        } else {
            console.error("AdSense script not loaded yet.");
        }
    }

    // Event listener to load AdSense script lazily after scroll
    window.addEventListener(
        "scroll",
        function () {
            if (!lazyAdsenseInitialized && (document.documentElement.scrollTop > 0 || document.body.scrollTop > 0)) {
                // Load AdSense script
                loadScript(
                    "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2974589963821146",
                    true,
                    initializeAdSense
                );
                lazyAdsenseInitialized = true;
            }
        },
        { passive: true }
    );

    // Fallback to load AdSense after a delay (in case the user doesn't scroll)
    setTimeout(function () {
        if (!lazyAdsenseInitialized) {
            loadScript(
                "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2974589963821146",
                true,
                initializeAdSense
            );
            lazyAdsenseInitialized = true;
        }
    }, 5000); // Fallback delay of 5 seconds
</script>
